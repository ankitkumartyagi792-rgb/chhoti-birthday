<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ€ Chhoti Sister's Birthday Card ğŸ‚</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #ffd1dc 0%, #e6e6fa 30%, #ffdab9 70%, #ffb6c1 100%);
            min-height: 100vh;
        }

        /* Page Container */
        .page {
            min-height: 100vh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.8s ease-out;
        }

        .page.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading Page */
        #loading-page {
            background: linear-gradient(135deg, #ffd1dc 0%, #e6e6fa 50%, #ffb6c1 100%);
        }

        .loading-text {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: #d63384;
            text-align: center;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 105, 180, 0.8); }
            50% { text-shadow: 0 0 40px rgba(255, 105, 180, 1), 0 0 60px rgba(214, 51, 132, 0.6); }
        }

        /* Balloons */
        .balloons-container {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .balloon {
            position: absolute;
            width: 50px;
            height: 60px;
            border-radius: 50% 50% 50% 50%;
            animation: float 4s ease-in-out infinite;
        }

        .balloon::after {
            content: '';
            position: absolute;
            bottom: -40px;
            left: 50%;
            width: 2px;
            height: 40px;
            background: #ccc;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }

        /* Welcome Page */
        #welcome-page h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            color: #d63384;
            text-align: center;
            animation: bounce 1s ease infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .subtitle {
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: #c71585;
            margin-top: 15px;
            text-align: center;
        }

        .sister-text {
            font-size: clamp(1rem, 3.5vw, 1.5rem);
            color: #ff69b4;
            margin-top: 10px;
            text-align: center;
        }

        /* Buttons */
        .btn {
            padding: 15px 40px;
            font-size: clamp(1rem, 4vw, 1.3rem);
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #ff69b4 0%, #d63384 100%);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 4px 20px rgba(214, 51, 132, 0.4);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 30px rgba(214, 51, 132, 0.6);
        }

        .btn:active {
            transform: scale(0.95);
        }

        /* Message Page */
        .card {
            width: min(90vw, 400px);
            background: linear-gradient(145deg, #fff 0%, #fff5f7 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(214, 51, 132, 0.2);
            transform: perspective(1000px) rotateY(0deg);
            animation: cardOpen 0.8s ease-out;
        }

        @keyframes cardOpen {
            from { transform: perspective(1000px) rotateY(-90deg); opacity: 0; }
            to { transform: perspective(1000px) rotateY(0deg); opacity: 1; }
        }

        .quote-box {
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4ec 100%);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 105, 180, 0.2);
            white-space: pre-line;
            line-height: 1.6;
            color: #6b21a8;
            font-size: clamp(0.9rem, 3.5vw, 1rem);
            animation: slideIn 0.5s ease-out;
            animation-fill-mode: both;
        }

        .quote-box:nth-child(2) { background: linear-gradient(135deg, #f0e6ff 0%, #e6e6fa 100%); animation-delay: 0.2s; }
        .quote-box:nth-child(3) { background: linear-gradient(135deg, #fff5ee 0%, #ffe4c4 100%); animation-delay: 0.4s; }
        .quote-box:nth-child(4) { background: linear-gradient(135deg, #f0fff0 0%, #e0ffe0 100%); animation-delay: 0.6s; }
        .quote-box:nth-child(5) { background: linear-gradient(135deg, #fff0f5 0%, #ffe4ec 100%); animation-delay: 0.8s; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .photo-frame {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid #ff69b4;
            margin: 0 auto 20px;
            overflow: hidden;
            display: none;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .input-group {
            margin-top: 20px;
        }

        .input-group label {
            display: block;
            color: #d63384;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            font-size: 1rem;
            border: 2px solid #ffb6c1;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            border-color: #d63384;
        }

        .upload-btn {
            width: 100%;
            padding: 12px;
            font-size: 0.9rem;
            color: #d63384;
            background: linear-gradient(135deg, #ffe4ec 0%, #fff0f5 100%);
            border: 2px dashed #ff69b4;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
        }

        .upload-btn:hover {
            background: linear-gradient(135deg, #ffd1dc 0%, #ffe4ec 100%);
        }

        /* Celebration Page */
        #celebration-page h1 {
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            color: #d63384;
            text-align: center;
            text-shadow: 2px 2px 10px rgba(214, 51, 132, 0.3);
        }

        /* Initial Wish Popup */
        .wish-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease;
        }

        .wish-popup.show {
            display: flex;
        }

        .wish-content {
            background: linear-gradient(135deg, #fff 0%, #ffe4ec 100%);
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            max-width: 90%;
            width: 400px;
            animation: popIn 0.6s ease-out;
            box-shadow: 0 20px 60px rgba(214, 51, 132, 0.4);
        }

        @keyframes popIn {
            from { transform: scale(0.5) rotate(-5deg); opacity: 0; }
            to { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .wish-content h2 {
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            color: #d63384;
            margin-bottom: 20px;
            animation: glow 1.5s ease-in-out infinite;
        }

        .wish-content p {
            font-size: clamp(1rem, 4vw, 1.3rem);
            color: #c71585;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .wish-big {
            font-size: clamp(1.3rem, 5vw, 1.8rem) !important;
            font-weight: 600;
            color: #d63384 !important;
            animation: bounce 1s ease infinite;
        }

        .wish-small {
            font-size: clamp(0.9rem, 3.5vw, 1.1rem) !important;
            color: #ff69b4 !important;
            margin-top: 15px !important;
        }

        .wish-emoji {
            font-size: 4rem;
            animation: bounce 0.5s ease infinite;
        }

        /* Cake */
        .cake-container {
            position: relative;
            width: 200px;
            height: 250px;
            margin: 20px auto;
        }

        .cake-layer {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .cake-bottom {
            width: 180px;
            height: 60px;
            bottom: 0;
            background: linear-gradient(to bottom, #FFB6C1, #ff69b4);
        }

        .cake-middle {
            width: 140px;
            height: 50px;
            bottom: 60px;
            background: linear-gradient(to bottom, #DDA0DD, #ba55d3);
        }

        .cake-top {
            width: 100px;
            height: 40px;
            bottom: 110px;
            background: linear-gradient(to bottom, #FFDAB9, #ffa07a);
        }

        .candle {
            position: absolute;
            width: 10px;
            height: 40px;
            background: linear-gradient(to bottom, #FFD700, #FFA500);
            border-radius: 3px;
            bottom: 150px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .candle:nth-child(4) { left: 70px; }
        .candle:nth-child(5) { left: 95px; background: linear-gradient(to bottom, #FF69B4, #d63384); }
        .candle:nth-child(6) { left: 120px; }

        .flame {
            position: absolute;
            width: 12px;
            height: 20px;
            background: linear-gradient(to top, #FFA500, #FFD700, #fff);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            top: -22px;
            left: -1px;
            animation: flicker 0.3s ease-in-out infinite alternate;
        }

        @keyframes flicker {
            0% { transform: scale(1) rotate(-2deg); opacity: 1; }
            100% { transform: scale(1.1) rotate(2deg); opacity: 0.8; }
        }

        .candle.blown .flame {
            display: none;
        }

        .cherry {
            position: absolute;
            width: 25px;
            height: 25px;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #DC143C);
            border-radius: 50%;
            bottom: 148px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: inset -3px -3px 5px rgba(0,0,0,0.2);
        }

        .cherry::before {
            content: '';
            position: absolute;
            width: 3px;
            height: 15px;
            background: #228B22;
            top: -12px;
            left: 50%;
            transform: rotate(-20deg);
            border-radius: 2px;
        }

        .tap-hint {
            color: #c71585;
            font-size: clamp(0.9rem, 3.5vw, 1rem);
            text-align: center;
            animation: pulse 1s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Song Section */
        .song-box {
            width: min(90vw, 400px);
            background: linear-gradient(135deg, #fff 0%, #fff5f7 100%);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 20px rgba(214, 51, 132, 0.15);
        }

        .song-title {
            font-size: clamp(1rem, 4vw, 1.3rem);
            color: #d63384;
            text-align: center;
            margin-bottom: 15px;
        }

        .lyrics {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            line-height: 1.8;
        }

        .lyrics span {
            display: inline-block;
            margin: 2px;
            transition: all 0.2s;
            font-size: clamp(0.85rem, 3vw, 1rem);
        }

        .lyrics span.active {
            color: #d63384;
            font-weight: bold;
            transform: scale(1.3);
            text-shadow: 0 0 10px rgba(214, 51, 132, 0.5);
        }

        .lyrics span.sung {
            color: #999;
        }

        .song-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control input[type="range"] {
            width: 100px;
            accent-color: #d63384;
        }

        .now-playing {
            color: #ff69b4;
            font-size: 0.9rem;
            margin-top: 10px;
            animation: pulse 1s ease infinite;
        }

        /* Final Message */
        .final-message {
            display: none;
            width: min(90vw, 400px);
            background: linear-gradient(135deg, #fff 0%, #ffe4ec 100%);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(214, 51, 132, 0.3);
            animation: popIn 0.5s ease-out;
        }

        .final-message.show {
            display: block;
        }

        .final-message h2 {
            font-size: clamp(1.2rem, 5vw, 1.8rem);
            color: #d63384;
            line-height: 1.5;
            animation: glow 2s ease-in-out infinite;
        }

        .final-message .sub {
            font-size: clamp(0.9rem, 4vw, 1.1rem);
            color: #c71585;
            margin-top: 10px;
        }

        .final-message .sister-msg {
            font-size: clamp(0.8rem, 3.5vw, 1rem);
            color: #ff69b4;
            margin-top: 10px;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: confettiFall 3s linear forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confettiFall {
            to {
                top: 100vh;
                transform: rotate(720deg);
            }
        }

        /* Hidden file input */
        #photo-input {
            display: none;
        }

        /* Decorative bow */
        .bow {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2rem;
            opacity: 0.3;
        }

        /* Hearts Animation */
        .hearts {
            position: fixed;
            font-size: 20px;
            animation: heartFloat 3s ease-out forwards;
            pointer-events: none;
            z-index: 999;
        }

        @keyframes heartFloat {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }
    </style>
</head>
<body>
    <!-- Balloons Background -->
    <div class="balloons-container" id="balloons"></div>

    <!-- Wish Popup -->
    <div class="wish-popup" id="wish-popup">
        <div class="wish-content">
            <div class="wish-emoji">ğŸ‚ğŸ‰ğŸ€</div>
            <h2>ğŸ‚ Happy Birthday Chhoti! ğŸ‚</h2>
            <p class="wish-big">ğŸ€ Meri Pyaari Chhoti ğŸ€</p>
            <p>Teri har wish poori ho! ğŸŒŸ</p>
            <p>Bhai hamesha tere saath hai! ğŸ’–</p>
            <p class="wish-small">God bless you meri jaan! ğŸ’•</p>
            <button class="btn" onclick="closeWish()">ğŸµ Birthday Song Suno ğŸµ</button>
        </div>
    </div>

    <!-- Page 1: Loading -->
    <div class="page active" id="loading-page">
        <div class="loading-text">ğŸ€ Chhoti ke liye Magic Load Ho Raha Haiâ€¦ âœ¨</div>
    </div>

    <!-- Page 2: Welcome -->
    <div class="page" id="welcome-page">
        <h1>Happy Birthday Sister!</h1>
        <p class="subtitle">Meri Pyari Chhoti Sister ğŸ’•</p>
        <p class="sister-text">ğŸ€ My Cute Little Sister ğŸ€</p>
        <button class="btn" onclick="goToPage('message-page')">Continue for Chhoti ğŸ’«</button>
    </div>

    <!-- Page 3: Message -->
    <div class="page" id="message-page">
        <div class="card">
            <span class="bow">ğŸ€</span>
            
            <div class="photo-frame" id="photo-frame">
                <img id="photo-preview" src="" alt="Chhoti's Photo">
            </div>

            <div class="quote-box">ğŸ€ Happy Birthday Meri Pyari Chhoti ğŸ‘‘ğŸ€

Chhoti, tu hamesha aise hi muskuraati rahe ğŸ˜Š
Teri har wish poori ho ğŸ‚
Bhai hamesha tere saath hai ğŸ’–
Tu meri sabse pyaari chhoti behen hai!</div>

            <div class="quote-box">ğŸ’• Chhoti, tu meri life ka sabse cute part hai ğŸ¥°ğŸ’•

Stay happy, stay blessed, meri pyaari chhoti â¤ï¸
Tujh jaisi chhoti kisi ki nahi! ğŸ’–
Tu hai meri jaan!</div>

            <div class="quote-box">ğŸŒŸ Dear Chhoti ğŸŒŸ

Tu meri strength hai, meri happiness hai
Bhai ki pyaari chhoti, tu special hai ğŸ’
Always keep smiling, chhoti jaan! ğŸ€
Love you forever!</div>

            <div class="quote-box">ğŸ’– Chhoti Baby ğŸ’–

Bachpan se badi tak, saath hai mera
Har dukh sukh mein, tu hai paas mera
Janamdin pe yeh special wish hai teri
Bhai ki pyaari chhoti, tu sabse nyari! ğŸ€</div>

            <div class="quote-box">âœ¨ Chhoti Princess âœ¨

Tu hai meri little princess ğŸ‘‘
Hamesha reh tu happy and blessed
Bhai ki duaa hamesha tere saath
Janamdin mubarak meri pyaari chhoti! ğŸ’•</div>

            <div class="input-group">
                <label>ğŸ€ Chhoti, Enter Your Name ğŸ’•</label>
                <input type="text" id="sister-name" placeholder="Chhoti ka naam..." oninput="updateName()">
            </div>

            <input type="file" id="photo-input" accept="image/*" onchange="handlePhoto(event)">
            <button class="upload-btn" onclick="document.getElementById('photo-input').click()">
                ğŸ€ Chhoti ki Photo Add Karein ğŸ“·
            </button>
        </div>

        <button class="btn" onclick="goToPage('celebration-page')">Chhoti's Celebration ğŸ‰</button>
    </div>

    <!-- Page 4: Celebration -->
    <div class="page" id="celebration-page">
        <h1>ğŸ‚ Chhoti's Birthday Celebration ğŸ‚</h1>

        <div class="cake-container">
            <div class="cake-layer cake-bottom"></div>
            <div class="cake-layer cake-middle"></div>
            <div class="cake-layer cake-top"></div>
            <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
            <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
            <div class="candle" onclick="blowCandle(this)"><div class="flame"></div></div>
            <div class="cherry"></div>
        </div>

        <p class="tap-hint" id="tap-hint">ğŸ‘† Chhoti, tap candles to blow! ğŸ€</p>

        <div class="song-box">
            <h2 class="song-title">ğŸµ Chhoti's Birthday Song ğŸµ</h2>
            <div class="lyrics" id="lyrics"></div>
            <p class="now-playing" id="now-playing"></p>
            <div class="song-controls">
                <button class="btn" id="play-btn" onclick="toggleSong()">â–¶ Play Song</button>
                <div class="volume-control">
                    <span>ğŸ”ˆ</span>
                    <input type="range" min="0" max="1" step="0.1" value="0.7" id="volume" onchange="setVolume(this.value)">
                    <span>ğŸ”Š</span>
                </div>
            </div>
        </div>

        <div class="final-message" id="final-message">
            <h2>ğŸ€ Love You Forever Chhoti ğŸ€<br><span id="display-name">Meri Pyari Chhoti</span> ğŸ’•</h2>
            <p class="sub">Chhoti, Keep Shining Always! ğŸŒŸ</p>
            <p class="sister-msg">ğŸ’– Bhai ki pyaari chhoti ğŸ’–</p>
            <button class="btn" onclick="location.reload()">ğŸ”„ Replay for Chhoti</button>
        </div>
    </div>

    <script>
        // ====================
        // PAGE NAVIGATION
        // ====================
        let currentPage = 'loading-page';
        let hasShownWish = false;
        
        function goToPage(pageId) {
            document.getElementById(currentPage).classList.remove('active');
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            
            if (pageId === 'celebration-page') {
                initLyrics();
                // Show wish popup first
                setTimeout(() => {
                    document.getElementById('wish-popup').classList.add('show');
                    createHearts();
                }, 500);
            }
        }

        function closeWish() {
            document.getElementById('wish-popup').classList.remove('show');
            // Auto play song after wish closes
            setTimeout(() => {
                if (!isPlaying) {
                    toggleSong();
                }
            }, 500);
        }

        // Auto navigate from loading
        setTimeout(() => {
            goToPage('welcome-page');
        }, 2500);

        // ====================
        // HEARTS ANIMATION
        // ====================
        function createHearts() {
            const hearts = ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜', 'ğŸ€'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'hearts';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.top = Math.random() * 100 + '%';
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 3000);
                }, i * 100);
            }
        }

        // ====================
        // BALLOONS
        // ====================
        function createBalloons() {
            const container = document.getElementById('balloons');
            const colors = ['#FF69B4', '#FFB6C1', '#DDA0DD', '#98FB98', '#87CEEB', '#FFDAB9', '#FFD700'];
            
            for (let i = 0; i < 12; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.style.background = colors[i % colors.length];
                balloon.style.left = Math.random() * 90 + '%';
                balloon.style.top = Math.random() * 80 + '%';
                balloon.style.animationDelay = Math.random() * 2 + 's';
                balloon.style.animationDuration = (3 + Math.random() * 2) + 's';
                container.appendChild(balloon);
            }
        }
        createBalloons();

        // ====================
        // NAME INPUT
        // ====================
        function updateName() {
            const name = document.getElementById('sister-name').value;
            document.getElementById('display-name').textContent = name || 'Meri Pyari Chhoti';
        }

        // ====================
        // PHOTO UPLOAD
        // ====================
        function handlePhoto(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const frame = document.getElementById('photo-frame');
                    document.getElementById('photo-preview').src = e.target.result;
                    frame.style.display = 'block';
                    frame.style.animation = 'fadeIn 0.5s ease-out';
                };
                reader.readAsDataURL(file);
            }
        }

        // ====================
        // CANDLES & CONFETTI
        // ====================
        let candlesBlown = 0;
        const totalCandles = 3;

        function blowCandle(candle) {
            if (!candle.classList.contains('blown')) {
                candle.classList.add('blown');
                candlesBlown++;
                
                playBlowSound();
                
                if (candlesBlown >= totalCandles) {
                    document.getElementById('tap-hint').style.display = 'none';
                    createConfetti();
                    setTimeout(() => {
                        document.getElementById('final-message').classList.add('show');
                    }, 1000);
                }
            }
        }

        function createConfetti() {
            const colors = ['#FF69B4', '#FFB6C1', '#DDA0DD', '#98FB98', '#FFD700', '#87CEEB'];
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    confetti.style.width = (5 + Math.random() * 10) + 'px';
                    confetti.style.height = confetti.style.width;
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 20);
            }
        }

        // ====================
        // FULL SONG & AUDIO
        // ====================
        let audioCtx = null;
        let isPlaying = false;
        let currentWord = 0;
        let songInterval = null;
        let volume = 0.7;
        let songTimeout = null;

        const songLyrics = [
            "ğŸ€ Aaj ka din hai khaas, meri pyaari chhoti ğŸ€",
            "Tu hai sabse pyaari chhoti, tu hai sabse haseen",
            "Teri muskaan pe kurbaan, yeh hai bhai ki baat",
            "Tujh jaisi chhoti na koi ho, tu hai anmol jaan",
            "",
            "ğŸ’• Happy Birthday to you, meri pyaari chhoti ğŸ’•",
            "Janamdin ki shubhkamnaayein, dil se yeh gaana",
            "Hamesha khush reh tu chhoti, bhai hai tere saath",
            "Teri har khwahish poori ho, yeh hai aaj ki raat âœ¨",
            "",
            "ğŸŒŸ Bachpan se hai saath chhoti, gudiya ke wo din ğŸŒŸ",
            "School ke wo lamhe, saare yaad hain mujhe",
            "Bhai ki pyaari chhoti, tu hai sabse special",
            "Aaj bade ho gayi ho, par same hai pyaar tera",
            "",
            "ğŸ€ Chhoti teri har muskaan, precious hai bhai ko ğŸ€",
            "Tu jahan khush rahe, wahi hai bhai ki duniya",
            "Janamdin pe yeh gift, dil se hai banaaya",
            "Chhoti tu hai special, bhai ki jaan tujhe ğŸ‚",
            "",
            "ğŸ’• Happy Birthday to you, meri pyaari chhoti ğŸ’•",
            "Janamdin ki shubhkamnaayein, dil se yeh gaana",
            "Hamesha khush reh tu chhoti, bhai hai tere saath",
            "Teri har khwahish poori ho, yeh hai aaj ki raat âœ¨",
            "",
            "ğŸ’– Love you chhoti, bhai ki jaan ğŸ’–",
            "Hamesha reh tu happy, bhai ki dua saath",
            "Janamdin mubarak meri pyaari chhoti",
            "Tu hai sabse nyari, tu hai anmol jaan ğŸ€"
        ];

        function initLyrics() {
            const container = document.getElementById('lyrics');
            const words = songLyrics.join(' ').split(' ').filter(w => w.length > 0);
            container.innerHTML = words.map((w, i) => `<span id="word-${i}">${w}</span>`).join(' ');
        }

        // Full birthday melody - normal speed version
        function playMelody() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }

            // Happy Birthday melody - normal tempo (BPM ~100)
            const melody = [
                // First phrase - "Happy birthday to you"
                { freq: 262, dur: 0.4 }, { freq: 262, dur: 0.4 },
                { freq: 294, dur: 0.8 }, { freq: 262, dur: 0.8 },
                { freq: 349, dur: 0.8 }, { freq: 330, dur: 1.6 },
                // Second phrase - "Happy birthday to you"
                { freq: 262, dur: 0.4 }, { freq: 262, dur: 0.4 },
                { freq: 294, dur: 0.8 }, { freq: 262, dur: 0.8 },
                { freq: 392, dur: 0.8 }, { freq: 349, dur: 1.6 },
                // Third phrase - "Happy birthday dear chhoti"
                { freq: 262, dur: 0.4 }, { freq: 262, dur: 0.4 },
                { freq: 523, dur: 0.8 }, { freq: 440, dur: 0.8 },
                { freq: 349, dur: 0.8 }, { freq: 330, dur: 0.8 },
                { freq: 294, dur: 1.6 },
                // Fourth phrase - "Happy birthday to you"
                { freq: 466, dur: 0.4 }, { freq: 466, dur: 0.4 },
                { freq: 440, dur: 0.8 }, { freq: 349, dur: 0.8 },
                { freq: 392, dur: 0.8 }, { freq: 349, dur: 1.6 },
                // Repeat - "Happy birthday to you"
                { freq: 262, dur: 0.4 }, { freq: 262, dur: 0.4 },
                { freq: 294, dur: 0.8 }, { freq: 262, dur: 0.8 },
                { freq: 349, dur: 0.8 }, { freq: 330, dur: 1.6 },
                // Ending notes
                { freq: 330, dur: 0.8 }, { freq: 349, dur: 0.8 },
                { freq: 392, dur: 0.8 }, { freq: 440, dur: 0.8 },
                { freq: 349, dur: 2.0 }
            ];

            let time = audioCtx.currentTime;
            
            melody.forEach(note => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                
                osc.type = 'sine';
                osc.frequency.setValueAtTime(note.freq, time);
                
                gain.gain.setValueAtTime(0, time);
                gain.gain.linearRampToValueAtTime(volume * 0.25, time + 0.03);
                gain.gain.linearRampToValueAtTime(volume * 0.15, time + note.dur * 0.7);
                gain.gain.linearRampToValueAtTime(0, time + note.dur);
                
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start(time);
                osc.stop(time + note.dur);
                
                time += note.dur;
            });

            return time - audioCtx.currentTime; // Return total duration
        }

        function playBlowSound() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(50, audioCtx.currentTime + 0.4);
            gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime + 0.4);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.4);
        }

        function toggleSong() {
            const btn = document.getElementById('play-btn');
            const nowPlaying = document.getElementById('now-playing');
            
            if (isPlaying) {
                isPlaying = false;
                btn.textContent = 'â–¶ Play Song';
                nowPlaying.textContent = '';
                clearInterval(songInterval);
                clearTimeout(songTimeout);
                currentWord = 0;
                resetLyrics();
            } else {
                isPlaying = true;
                btn.textContent = 'â¸ Pause';
                nowPlaying.textContent = 'ğŸµ Now Playing for Chhoti... ğŸµ';
                
                const duration = playMelody();
                const words = songLyrics.join(' ').split(' ').filter(w => w.length > 0);
                const wordDelay = (duration * 1000) / words.length;
                
                songInterval = setInterval(() => {
                    // Remove active from previous word
                    if (currentWord > 0) {
                        const prevWord = document.getElementById(`word-${currentWord - 1}`);
                        if (prevWord) {
                            prevWord.classList.remove('active');
                            prevWord.classList.add('sung');
                        }
                    }
                    
                    // Add active to current word
                    if (currentWord < words.length) {
                        const currWord = document.getElementById(`word-${currentWord}`);
                        if (currWord) {
                            currWord.classList.add('active');
                            currWord.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        currentWord++;
                    } else {
                        // Song finished - restart
                        currentWord = 0;
                        resetLyrics();
                    }
                }, wordDelay);

                // Stop after melody duration
                songTimeout = setTimeout(() => {
                    clearInterval(songInterval);
                    isPlaying = false;
                    btn.textContent = 'â–¶ Play Song';
                    nowPlaying.textContent = 'âœ… Song Finished! Play Again?';
                    currentWord = 0;
                    resetLyrics();
                }, duration * 1000);
            }
        }

        function resetLyrics() {
            document.querySelectorAll('.lyrics span').forEach(span => {
                span.classList.remove('active', 'sung');
            });
        }

        function setVolume(val) {
            volume = parseFloat(val);
        }
    </script>
</body>
</html>
